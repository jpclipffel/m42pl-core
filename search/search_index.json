{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"M42PL - A Data Manipulation Language M42PL is a Data Manipulation Language , inspired by Unix shells and Splunk . The language is extremely simple to learn and to use. It is designed to make data manipulation trivial, even for non-technical users. Examples Query an URL | url 'https://api.ipify.org' | fields response.content, response.status | eval message = 'Your external IP is ' + response.content Run a HTTP server | http_server with '*' on '/foo' = [ | echo | eval path='foo', mode='infinite+iterator' | fields path, mode ], '*' on '/bar' = [ | eval path='bar', mode='infinite+stream' | fields path, mode ], '*' on '/{path}' = [] Capture and stream a video This requires the installation of m42pl-vision | cv2_read | cv2_resize ratio=0.5 | zmq_pub topic='webcam' Display a video stream This requires the installation of m42pl-vision | zmq_sub topic='webcam' | decode {zmq.frames[0]} with 'msgpack' | cv2_show cv2.frame","title":"Home"},{"location":"#m42pl-a-data-manipulation-language","text":"M42PL is a Data Manipulation Language , inspired by Unix shells and Splunk . The language is extremely simple to learn and to use. It is designed to make data manipulation trivial, even for non-technical users.","title":"M42PL - A Data Manipulation Language"},{"location":"#examples","text":"Query an URL | url 'https://api.ipify.org' | fields response.content, response.status | eval message = 'Your external IP is ' + response.content Run a HTTP server | http_server with '*' on '/foo' = [ | echo | eval path='foo', mode='infinite+iterator' | fields path, mode ], '*' on '/bar' = [ | eval path='bar', mode='infinite+stream' | fields path, mode ], '*' on '/{path}' = [] Capture and stream a video This requires the installation of m42pl-vision | cv2_read | cv2_resize ratio=0.5 | zmq_pub topic='webcam' Display a video stream This requires the installation of m42pl-vision | zmq_sub topic='webcam' | decode {zmq.frames[0]} with 'msgpack' | cv2_show cv2.frame","title":"Examples"},{"location":"mains/","text":"Mains The M42PL core package comes with different mains , aka. entry points to runs your pipelines. repl : Runs M42PL as a REPL (interactive command interpreter) run : Runs a M42PL script grammar : Prints M42PL EBNF grammar parse : Parse a M42PL script","title":"Overview"},{"location":"mains/#mains","text":"The M42PL core package comes with different mains , aka. entry points to runs your pipelines. repl : Runs M42PL as a REPL (interactive command interpreter) run : Runs a M42PL script grammar : Prints M42PL EBNF grammar parse : Parse a M42PL script","title":"Mains"},{"location":"mains/grammar/","text":"Grammar Dumps the EBNF grammar of a command. m42pl grammar <command_name>","title":"Grammar debug"},{"location":"mains/grammar/#grammar","text":"Dumps the EBNF grammar of a command. m42pl grammar <command_name>","title":"Grammar"},{"location":"mains/parse/","text":"Parse Parses the given M42PL script. m42pl parse <source_file>","title":"Parsing debug"},{"location":"mains/parse/#parse","text":"Parses the given M42PL script. m42pl parse <source_file>","title":"Parse"},{"location":"mains/repl/","text":"REPL (legacy) Legacy M42PL REPL / interpreter. Replaced by the new repl .","title":"REPL (legacy)"},{"location":"mains/repl/#repl-legacy","text":"Legacy M42PL REPL / interpreter. Replaced by the new repl .","title":"REPL (legacy)"},{"location":"mains/repl2/","text":"REPL Runs M42PL as a REPL (interactive command interpreter). m42pl repl General usage Unlike a standard Shell, the M42PL read multiples lines at once; to execute the pipeline you typed, hit Escape then Enter When a pipeline is running, type Ctrl+c to stop it You can use the arrow keys to move in history and in the pipeline source The REPL automatically adds an output command to your pipeline if you didn't added a similar command; use another dispatcher ( -d <dipatcher name> ) such as local to avoid this behaviour Arguments Tip Run m42pl repl -h or m42pl repl --help to get help TODO Document REPL arguments Builtins commands The REPL provides some builtins commands, not run by M42PL dispatcher. Builtin Description exit Exists the REPL modules Prints the list of loaded modules import <name> Imports the module <name> reload Reloads the imported modules help Prints help cd <path> Changes the working directory to <path> pwd Prints the current working directory Prompt customization You can change the prompt prefix using -p or --prefix to provide an HTML string. Some standard PS1 builtins are supported as well. Tip Do not forget to close the HTML tags, e.g. <bold>...</bold> Syntax Kind Description {w} PS1 builtin Replaced by the current working directory {u} PS1 builtin Replaced by the current user name <bold> HTML tag Write text in bold <color name> HTML tag Write text in the given color name","title":"REPL (interactive)"},{"location":"mains/repl2/#repl","text":"Runs M42PL as a REPL (interactive command interpreter). m42pl repl","title":"REPL"},{"location":"mains/repl2/#general-usage","text":"Unlike a standard Shell, the M42PL read multiples lines at once; to execute the pipeline you typed, hit Escape then Enter When a pipeline is running, type Ctrl+c to stop it You can use the arrow keys to move in history and in the pipeline source The REPL automatically adds an output command to your pipeline if you didn't added a similar command; use another dispatcher ( -d <dipatcher name> ) such as local to avoid this behaviour","title":"General usage"},{"location":"mains/repl2/#arguments","text":"Tip Run m42pl repl -h or m42pl repl --help to get help TODO Document REPL arguments","title":"Arguments"},{"location":"mains/repl2/#builtins-commands","text":"The REPL provides some builtins commands, not run by M42PL dispatcher. Builtin Description exit Exists the REPL modules Prints the list of loaded modules import <name> Imports the module <name> reload Reloads the imported modules help Prints help cd <path> Changes the working directory to <path> pwd Prints the current working directory","title":"Builtins commands"},{"location":"mains/repl2/#prompt-customization","text":"You can change the prompt prefix using -p or --prefix to provide an HTML string. Some standard PS1 builtins are supported as well. Tip Do not forget to close the HTML tags, e.g. <bold>...</bold> Syntax Kind Description {w} PS1 builtin Replaced by the current working directory {u} PS1 builtin Replaced by the current user name <bold> HTML tag Write text in bold <color name> HTML tag Write text in the given color name","title":"Prompt customization"},{"location":"mains/run/","text":"Run Runs a M42PL pipeline from a file. m42pl run <source_file> Arguments Tip Run m42pl repl -h or m42pl repl --help to get help TODO Document REPL arguments","title":"Script"},{"location":"mains/run/#run","text":"Runs a M42PL pipeline from a file. m42pl run <source_file>","title":"Run"},{"location":"mains/run/#arguments","text":"Tip Run m42pl repl -h or m42pl repl --help to get help TODO Document REPL arguments","title":"Arguments"},{"location":"quickstart/firststeps/","text":"First Steps Start the command line Once M42PL is installed ( installation instructions ), you may run it in REPL (interactive) mode: If installed locally: m42pl repl If installed locally in a virtual environement: source m42pl/bin/activate m42pl repl If installed using Docker: docker run -it jpclipffel/m42pl repl Command line usage Hint The M42PL REPL runs in multi-lines edit, which means than pressing Enter will literally add a new line. To execute the commands you have typed, press Esc then Enter . The M42PL language is extremelly simple: A program / script is a list of commands A command starts with the pipe | character A command may takes argument(s) (also known as fields ) This is an Hello World example: | eval hello='world' At any point, you may run a builtin : help : Display a quick REPL help exit : Quit the REPL You can get a list of available commands by running the commands command: | commands Lets keep only the fields we're interested in, namely command.alias and command.about : | commands | fields command.alias, command.about You may notice that some duplicates command.about appears; this is because many commands have aliases , i.e. multiple names. To regroup the command which have the same description, you may use stats : | commands | fields command.alias, command.about | stats values(command.alias) as aliases by command.about Finally, to generate a nice single-line description of each command, it aliases and its description: | commands | fields command.alias, command.about | stats values(command.alias) as aliases by command.about | eval man = join(aliases, ', ') + ': ' + command.about | fields man Events M42PL works with events . An event is a single unit of information, which contains one or more fields . You can think of an event as a JSON or YAML document, as a Python's dict (which they are), as a C/C++ structure, etc. Events are generated by Generating commands and processed by Streaming commands & Buffering commands . Commands M42PL provides 4 types of commands: Generating commands generates events There is a single generating command per pipeline Generating command are usually put first in the pipeline A pipeline may include sub-pipelines, each of them may include a genrating command Generating commands may be piped into streaming commands , buffering commands and meta commands Streaming commands process events Each streaming command may be piped into another streaming command , buffering command or meta command Buffering commands process block of events Each buffering command may be piped into another buffering command , streaming command or meta command Meta commands forwards the data and manipulates the pipeline itself Each metacommand may be piped into another meta command , streaming command or buffering command Fields Fields are both the events attributes and a way to access the given attributes . Commands support 5 type of fields: Literal : A literal value such as a number, a string or a list of values, e.g. 42 , 'some text' , (1, 2, 3) Path : A field name or a doted field name, e.g. field , field.subfield JsonPath : A JsonPath expression, e.g. {list[0].name} Eval : An evaulation expression, e.g. at(list, 0) Pipe : A sub-pipeline, e.g. [ | kvread 'someName' ]","title":"First steps"},{"location":"quickstart/firststeps/#first-steps","text":"","title":"First Steps"},{"location":"quickstart/firststeps/#start-the-command-line","text":"Once M42PL is installed ( installation instructions ), you may run it in REPL (interactive) mode: If installed locally: m42pl repl If installed locally in a virtual environement: source m42pl/bin/activate m42pl repl If installed using Docker: docker run -it jpclipffel/m42pl repl","title":"Start the command line"},{"location":"quickstart/firststeps/#command-line-usage","text":"Hint The M42PL REPL runs in multi-lines edit, which means than pressing Enter will literally add a new line. To execute the commands you have typed, press Esc then Enter . The M42PL language is extremelly simple: A program / script is a list of commands A command starts with the pipe | character A command may takes argument(s) (also known as fields ) This is an Hello World example: | eval hello='world' At any point, you may run a builtin : help : Display a quick REPL help exit : Quit the REPL You can get a list of available commands by running the commands command: | commands Lets keep only the fields we're interested in, namely command.alias and command.about : | commands | fields command.alias, command.about You may notice that some duplicates command.about appears; this is because many commands have aliases , i.e. multiple names. To regroup the command which have the same description, you may use stats : | commands | fields command.alias, command.about | stats values(command.alias) as aliases by command.about Finally, to generate a nice single-line description of each command, it aliases and its description: | commands | fields command.alias, command.about | stats values(command.alias) as aliases by command.about | eval man = join(aliases, ', ') + ': ' + command.about | fields man","title":"Command line usage"},{"location":"quickstart/firststeps/#events","text":"M42PL works with events . An event is a single unit of information, which contains one or more fields . You can think of an event as a JSON or YAML document, as a Python's dict (which they are), as a C/C++ structure, etc. Events are generated by Generating commands and processed by Streaming commands & Buffering commands .","title":"Events"},{"location":"quickstart/firststeps/#commands","text":"M42PL provides 4 types of commands: Generating commands generates events There is a single generating command per pipeline Generating command are usually put first in the pipeline A pipeline may include sub-pipelines, each of them may include a genrating command Generating commands may be piped into streaming commands , buffering commands and meta commands Streaming commands process events Each streaming command may be piped into another streaming command , buffering command or meta command Buffering commands process block of events Each buffering command may be piped into another buffering command , streaming command or meta command Meta commands forwards the data and manipulates the pipeline itself Each metacommand may be piped into another meta command , streaming command or buffering command","title":"Commands"},{"location":"quickstart/firststeps/#fields","text":"Fields are both the events attributes and a way to access the given attributes . Commands support 5 type of fields: Literal : A literal value such as a number, a string or a list of values, e.g. 42 , 'some text' , (1, 2, 3) Path : A field name or a doted field name, e.g. field , field.subfield JsonPath : A JsonPath expression, e.g. {list[0].name} Eval : An evaulation expression, e.g. at(list, 0) Pipe : A sub-pipeline, e.g. [ | kvread 'someName' ]","title":"Fields"},{"location":"quickstart/installation/","text":"Installation Container images Two container images are available: jpclipffel/m42pl : standard image, comes with everything pre-installed docker pull jpclipffel/m42pl:latest # Or docker pull ghcr.io/jpclipffel/m42pl:latest jpclipffel/m42pl-core : base image, contains only m42pl-core docker pull jpclipffel/m42pl-core:latest # Or docker pull ghcr.io/jpclipffel/m42pl-core:latest From source M42PL is built on several components ( core , commands , dispatchers , kvstores and encoders ). Hint If is recomended to install M42PL into a dedicated virtual environement: python -m venv m42pl and source m42pl/bin/activate Hint If you plan to make change to M42PL, install the component(s) with pip install -e <component> Install the core project m42pl_core : git clone https://github.com/jpclipffel/m42pl-core pip install m42pl-core Install the core commands m42pl_commands : git clone https://github.com/jpclipffel/m42pl-commands pip install m42pl-commands Install the core dispatchers m42pl_dispatchers : git clone https://github.com/jpclipffel/m42pl-dispatchers pip install m42pl-dispatchers Install the core kvstores m42pl_kvsotres : git clone https://github.com/jpclipffel/m42pl-kvstores pip install m42pl-kvstores Install the core encoders m42pl_encoders : git clone https://github.com/jpclipffel/m42pl-encoders pip install m42pl-encoders","title":"Installation"},{"location":"quickstart/installation/#installation","text":"","title":"Installation"},{"location":"quickstart/installation/#container-images","text":"Two container images are available: jpclipffel/m42pl : standard image, comes with everything pre-installed docker pull jpclipffel/m42pl:latest # Or docker pull ghcr.io/jpclipffel/m42pl:latest jpclipffel/m42pl-core : base image, contains only m42pl-core docker pull jpclipffel/m42pl-core:latest # Or docker pull ghcr.io/jpclipffel/m42pl-core:latest","title":"Container images"},{"location":"quickstart/installation/#from-source","text":"M42PL is built on several components ( core , commands , dispatchers , kvstores and encoders ). Hint If is recomended to install M42PL into a dedicated virtual environement: python -m venv m42pl and source m42pl/bin/activate Hint If you plan to make change to M42PL, install the component(s) with pip install -e <component> Install the core project m42pl_core : git clone https://github.com/jpclipffel/m42pl-core pip install m42pl-core Install the core commands m42pl_commands : git clone https://github.com/jpclipffel/m42pl-commands pip install m42pl-commands Install the core dispatchers m42pl_dispatchers : git clone https://github.com/jpclipffel/m42pl-dispatchers pip install m42pl-dispatchers Install the core kvstores m42pl_kvsotres : git clone https://github.com/jpclipffel/m42pl-kvstores pip install m42pl-kvstores Install the core encoders m42pl_encoders : git clone https://github.com/jpclipffel/m42pl-encoders pip install m42pl-encoders","title":"From source"}]}